<!-- leaderboard.html -->
<!DOCTYPE html>
<html class="dark" lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Department Leaderboard</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    /* keep page narrow like other screens */
    .container-max { max-width: 1200px; }
  </style>
  </head>
<body class="bg-gray-900 text-gray-100 font-sans">
  <header class="flex justify-between items-center h-16 border-b border-gray-700 px-6">
    <div class="flex items-center gap-2">
      <span class="inline-block w-3 h-3 rounded-sm bg-indigo-500"></span>
      <h1 class="text-xl font-bold">CivicLens</h1>
      <nav class="hidden md:flex items-center gap-2 ml-6 text-sm text-gray-400">
        <a href="dashboard.html" class="px-2 py-1 hover:text-gray-200">Dashboard</a>
        <span class="px-2 py-1 rounded bg-gray-800 text-gray-200">Leaderboard</span>
        <a href="stats.html" class="px-2 py-1 hover:text-gray-200">Statistics</a>
      </nav>
    </div>
    <div class="flex items-center gap-3">
      <button id="logoutBtn" class="text-sm text-gray-300 hover:text-red-400">Logout</button>
    </div>
  </header>

  <main class="p-6 container-max mx-auto">
    <h2 class="text-2xl font-bold mb-1">Department Leaderboard</h2>
    <p class="text-sm text-gray-400 mb-4">Track department performance and identify areas for improvement.</p>

    <div class="overflow-x-auto rounded-lg border border-gray-700">
      <table class="min-w-full divide-y divide-gray-700 text-sm" aria-label="Department leaderboard table">
        <thead class="bg-gray-800 text-gray-400 uppercase text-xs">
          <tr>
            <th class="px-6 py-3 text-left">Rank</th>
            <th class="px-6 py-3 text-left">Department</th>
            <th class="px-6 py-3 text-right">Resolved</th>
            <th class="px-6 py-3 text-right">Avg Time (hrs)</th>
            <th class="px-6 py-3 text-right">SLA (hrs)</th>
            <th class="px-6 py-3 text-right">Productivity (/50)</th>
            <th class="px-6 py-3 text-right">Speed (/50)</th>
            <th class="px-6 py-3 text-right">Total (/100)</th>
          </tr>
        </thead>
        <tbody id="tbody" class="divide-y divide-gray-800"></tbody>
      </table>
    </div>
  </main>

  <script>
    const $ = (s)=>document.querySelector(s);
    // Check for department authentication
    const deptAuth = localStorage.getItem('DEPT_AUTH');
    if (!deptAuth) {
      window.location.href = 'index.html';
    }

    // Snapshot data from updated Excel image (including SLA)
    const rows = [
      { dept: 'Roads & Potholes', resolved: 50, avg: 40, sla: 72, productivity: 45.5, speed: 47.4, total: 92.8 },
      { dept: 'Garbage & Waste Management', resolved: 55, avg: 20, sla: 24, productivity: 50.0, speed: 37.5, total: 87.5 },
      { dept: 'Water Supply & Sewage', resolved: 38, avg: 30, sla: 48, productivity: 34.5, speed: 44.4, total: 79.0 },
      { dept: 'Street Lighting', resolved: 33, avg: 60, sla: 72, productivity: 30.0, speed: 37.5, total: 67.5 },
      { dept: 'Parks & Green Spaces', resolved: 22, avg: 96, sla: 168, productivity: 20.0, speed: 46.7, total: 66.7 },
      { dept: 'Traffic & Parking Issues', resolved: 30, avg: 40, sla: 48, productivity: 27.3, speed: 37.5, total: 64.8 },
      { dept: 'Political Posters / Vandalism', resolved: 25, avg: 18, sla: 24, productivity: 22.7, speed: 40.0, total: 62.7 },
      { dept: 'Flooding & Drainage', resolved: 27, avg: 22, sla: 24, productivity: 24.5, speed: 35.3, total: 59.8 },
      { dept: 'Noise & Air Pollution', resolved: 15, avg: 48, sla: 72, productivity: 13.6, speed: 42.9, total: 56.5 },
      { dept: 'Public Health & Sanitation', resolved: 18, avg: 36, sla: 48, productivity: 16.4, speed: 40.0, total: 56.4 },
      { dept: 'Public Infrastructure', resolved: 20, avg: 140, sla: 168, productivity: 18.2, speed: 37.5, total: 55.7 },
      { dept: 'Encroachments & Illegal Constructions', resolved: 10, avg: 120, sla: 168, productivity: 9.1, speed: 41.2, total: 50.3 },
      { dept: 'Public Transport & Bus Stops', resolved: 12, avg: 130, sla: 168, productivity: 10.9, speed: 39.3, total: 50.2 },
      { dept: 'Drinking Water Quality', resolved: 19, avg: 28, sla: 24, productivity: 17.3, speed: 30.0, total: 47.3 },
      { dept: 'Electricity & Power Supply', resolved: 8, avg: 18, sla: 24, productivity: 7.3, speed: 40.0, total: 47.3 }
    ];

    function render(){
      // Keep the order provided in the snapshot, rank sequentially
      const tbody = document.getElementById('tbody');
      tbody.innerHTML = '';
      rows.forEach((r, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="px-6 py-3">${idx + 1}</td>
          <td class="px-6 py-3">${r.dept}</td>
          <td class="px-6 py-3 text-right">${r.resolved}</td>
          <td class="px-6 py-3 text-right">${r.avg}</td>
          <td class="px-6 py-3 text-right">${r.sla}</td>
          <td class="px-6 py-3 text-right">${r.productivity}</td>
          <td class="px-6 py-3 text-right">${r.speed}</td>
          <td class="px-6 py-3 text-right font-semibold text-indigo-300">${r.total}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    document.getElementById('logoutBtn').addEventListener('click', ()=>{
      localStorage.removeItem('DEPT_AUTH');
      window.location.href = 'index.html';
    });

    render();
  </script>
</body>
</html>


